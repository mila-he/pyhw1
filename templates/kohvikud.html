<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kohvikud</title>
</head>
<body>

    <h2>Filtreeri kohvikuid aja j√§rgi</h2>

    <form method="GET" action="/kohvikud">
        <label for="start_time">Avatud alates (24H):</label>
        <input type="time" id="start_time" name="start_time">

        <label for="end_time">Kuni (24H):</label>
        <input type="time" id="end_time" name="end_time">

        <button type="submit">Filtreeri</button>
    </form>

    <br>

    <form method="POST" action="/kohvikud">
        <h2>Lisa uus kohvik</h2>
        <label for="name">Nimi:</label>
        <input type="text" id="name" name="name" required>

        <label for="location">Asukoht:</label>
        <input type="text" id="location" name="location" required>

        <label for="time_open">Avatud alates (24H):</label>
        <input type="time" id="time_open" name="time_open" required>

        <label for="time_closed">Kuni (24H):</label>
        <input type="time" id="time_closed" name="time_closed" required>

        <button type="submit">Lisa kohvik</button>
    </form>

    <br>

    <h1>Kohvikud</h1>
    <h2>Muutmine ja kustutamine</h2>
    <table>
        <tr>
            <th>Nimi</th>
            <th>Asukoht</th>
            <th>Avame</th>
            <th>Sulgeme</th>
            <th>Muuda</th>
            <th>Kustuta</th>
        </tr>
        {% for kohvik in kohvikud %}
        <tr>
            <!-- KOHVIKU MUUTMINE (PUT) -->
            <form method="POST" action="/kohvikud">
                <input type="hidden" name="_method" value="PUT">  <!-- Peidetud PUT-meetod -->
                <input type="hidden" name="edit_id" value="{{ kohvik.id }}">
                <td><input type="text" name="name" value="{{ kohvik.name }}" required></td>
                <td><input type="text" name="location" value="{{ kohvik.location }}" required></td>
                <td><input type="time" name="time_open" value="{{ kohvik.time_open.strftime('%H:%M') }}" required></td>
                <td><input type="time" name="time_closed" value="{{ kohvik.time_closed.strftime('%H:%M') }}" required></td>
                <td><button type="submit">Muuda</button></td>
            </form>

            <!-- KOHVIKU KUSTUTAMINE (DELETE) -->
            <td>
                <form method="POST" action="/kohvikud">
                    <input type="hidden" name="_method" value="DELETE"> <!-- Peidetud DELETE-meetod -->
                    <input type="hidden" name="delete_id" value="{{ kohvik.id }}">
                    <button type="submit">Kustuta</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

</body>
</html>